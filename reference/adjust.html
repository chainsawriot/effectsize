<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Adjust data for the effect of other variable(s) — adjust • effectsize</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Adjust data for the effect of other variable(s) — adjust" />
<meta property="og:description" content="This function can be used to adjust the data for the effect of other
variables present in the dataset. It is based on an underlying fitting of
regressions models, allowing for quite some flexibility, such as including
factors as random effects in mixed models (multilevel partialization),
continuous variables as smooth terms in general additive models (non-linear
partialization) and/or fitting these models under a Bayesian framework. The
values returned by this function are the residuals of the regression models.
Note that a regular correlation between two &quot;adjusted&quot; variables is
equivalent to the partial correlation between them." />
<meta property="og:image" content="/logo.png" />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



<!-- dependencies from examples -->


  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">effectsize</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.4-1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">Features</a>
</li>
<li>
  <a href="../articles/standardize_data.html">Data Standardization</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Effect Sizes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/standardize_parameters.html">Parameter and Model Standardization</a>
    </li>
    <li>
      <a href="../articles/anovaES.html">ANOVA Effect Sizes</a>
    </li>
    <li>
      <a href="../articles/bayesian_models.html">For Bayesian Models</a>
    </li>
    <li>
      <a href="../articles/simple_htests.html">Effect Sizes for Simple Hypothesis Tests</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Conversion
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/convert.html">Between d, r, OR</a>
    </li>
    <li>
      <a href="../articles/from_test_statistics.html">From Test Statistics</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/interpret.html">Interpretation Guidelines</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/easystats/effectsize/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Adjust data for the effect of other variable(s)</h1>
    <small class="dont-index">Source: <a href='https://github.com/easystats/effectsize/blob/master/R/adjust.R'><code>R/adjust.R</code></a></small>
    <div class="hidden name"><code>adjust.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function can be used to adjust the data for the effect of other
variables present in the dataset. It is based on an underlying fitting of
regressions models, allowing for quite some flexibility, such as including
factors as random effects in mixed models (multilevel partialization),
continuous variables as smooth terms in general additive models (non-linear
partialization) and/or fitting these models under a Bayesian framework. The
values returned by this function are the residuals of the regression models.
Note that a regular correlation between two "adjusted" variables is
equivalent to the partial correlation between them.</p>
    </div>

    <pre class="usage"><span class='fu'>adjust</span><span class='op'>(</span>
  <span class='va'>data</span>,
  effect <span class='op'>=</span> <span class='cn'>NULL</span>,
  select <span class='op'>=</span> <span class='cn'>NULL</span>,
  exclude <span class='op'>=</span> <span class='cn'>NULL</span>,
  multilevel <span class='op'>=</span> <span class='cn'>FALSE</span>,
  additive <span class='op'>=</span> <span class='cn'>FALSE</span>,
  bayesian <span class='op'>=</span> <span class='cn'>FALSE</span>,
  keep_intercept <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span>

<span class='fu'>data_adjust</span><span class='op'>(</span>
  <span class='va'>data</span>,
  effect <span class='op'>=</span> <span class='cn'>NULL</span>,
  select <span class='op'>=</span> <span class='cn'>NULL</span>,
  exclude <span class='op'>=</span> <span class='cn'>NULL</span>,
  multilevel <span class='op'>=</span> <span class='cn'>FALSE</span>,
  additive <span class='op'>=</span> <span class='cn'>FALSE</span>,
  bayesian <span class='op'>=</span> <span class='cn'>FALSE</span>,
  keep_intercept <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A dataframe.</p></td>
    </tr>
    <tr>
      <th>effect</th>
      <td><p>Character vector of column names to be adjusted for (regressed
out). If <code>NULL</code> (the default), all variables will be selected.</p></td>
    </tr>
    <tr>
      <th>select</th>
      <td><p>Character vector of column names. If <code>NULL</code> (the default), all
variables will be selected.</p></td>
    </tr>
    <tr>
      <th>exclude</th>
      <td><p>Character vector of column names to be excluded from selection.</p></td>
    </tr>
    <tr>
      <th>multilevel</th>
      <td><p>If <code>TRUE</code>, the factors are included as random factors.
Else, if <code>FALSE</code> (default), they are included as fixed effects in the
simple regression model.</p></td>
    </tr>
    <tr>
      <th>additive</th>
      <td><p>If <code>TRUE</code>, continuous variables as included as smooth terms
in additive models. The goal is to regress-out potential non-linear
effects.</p></td>
    </tr>
    <tr>
      <th>bayesian</th>
      <td><p>If <code>TRUE</code>, the models are fitted under the Bayesian framework
using <code>rstanarm</code>.</p></td>
    </tr>
    <tr>
      <th>keep_intercept</th>
      <td><p>If <code>FALSE</code> (default), the intercept of the model is
re-added. This avoids the centering around 0 that happens by default
when regressing out another variable (see the examples below for a
visual representation of this).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame comparable to <code>data</code>, with adjusted variables.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>adjusted_all</span> <span class='op'>&lt;-</span> <span class='fu'>adjust</span><span class='op'>(</span><span class='va'>attitude</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>adjusted_all</span><span class='op'>)</span>
</div><div class='output co'>#&gt;        rating complaints privileges    learning     raises   critical
#&gt; 1  -8.1102953  5.5583770 -15.848949 -2.75102306  0.5742664  15.605502
#&gt; 2   1.6472337  0.0646564  -1.422592 -3.06207012 -1.5567655  -2.315781
#&gt; 3   1.0605589 -7.5116953  11.174609  5.59808033  4.8603132   8.061801
#&gt; 4  -0.2268416  3.8345277  -4.567441  0.03866933 -7.1185324  13.002574
#&gt; 5   6.5462010 -1.2420122  -3.051098  0.87312095 -2.7131349   6.500353
#&gt; 6 -10.9418499  5.2030745   2.664156 -1.24552098  4.1370346 -21.678382
#&gt;      advance
#&gt; 1  2.8684130
#&gt; 2  5.3937097
#&gt; 3 -6.4236221
#&gt; 4 -0.3951046
#&gt; 5  2.1988621
#&gt; 6 -3.1912418</div><div class='input'><span class='va'>adjusted_one</span> <span class='op'>&lt;-</span> <span class='fu'>adjust</span><span class='op'>(</span><span class='va'>attitude</span>, effect <span class='op'>=</span> <span class='st'>"complaints"</span>, select <span class='op'>=</span> <span class='st'>"rating"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>adjusted_one</span><span class='op'>)</span>
</div><div class='output co'>#&gt;        rating complaints privileges learning raises critical advance
#&gt; 1  -9.8614202         51         30       39     61       92      45
#&gt; 2   0.3286522         64         51       54     63       73      47
#&gt; 3   3.8009933         70         68       69     76       86      48
#&gt; 4  -0.9167380         63         45       47     54       84      35
#&gt; 5   7.7641147         78         56       66     71       83      47
#&gt; 6 -12.8798594         55         49       44     54       49      34</div><div class='input'>
<span class='co'># \donttest{</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='fu'>adjust</span><span class='op'>(</span><span class='va'>attitude</span>, effect <span class='op'>=</span> <span class='st'>"complaints"</span>, select <span class='op'>=</span> <span class='st'>"rating"</span>, bayesian <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'>adjust</span><span class='op'>(</span><span class='va'>attitude</span>, effect <span class='op'>=</span> <span class='st'>"complaints"</span>, select <span class='op'>=</span> <span class='st'>"rating"</span>, additive <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>attitude</span><span class='op'>$</span><span class='va'>complaints_LMH</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cut.html'>cut</a></span><span class='op'>(</span><span class='va'>attitude</span><span class='op'>$</span><span class='va'>complaints</span>, <span class='fl'>3</span><span class='op'>)</span>
<span class='fu'>adjust</span><span class='op'>(</span><span class='va'>attitude</span>, effect <span class='op'>=</span> <span class='st'>"complaints_LMH"</span>, select <span class='op'>=</span> <span class='st'>"rating"</span>, multilevel <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='op'>}</span>
<span class='co'># }</span>
<span class='kw'>if</span><span class='op'>(</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='st'><a href='https://easystats.github.io/bayestestR/'>"bayestestR"</a></span><span class='op'>)</span> <span class='op'>&amp;&amp;</span> <span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='st'><a href='http://www.stats.ox.ac.uk/pub/MASS4/'>"MASS"</a></span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
<span class='co'># Generate data</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'>bayestestR</span><span class='fu'>::</span><span class='fu'><a href='https://easystats.github.io/bayestestR/reference/simulate_correlation.html'>simulate_correlation</a></span><span class='op'>(</span>n<span class='op'>=</span><span class='fl'>100</span>, r<span class='op'>=</span><span class='fl'>0.7</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>V2</span> <span class='op'>&lt;-</span> <span class='op'>(</span><span class='fl'>5</span> <span class='op'>*</span> <span class='va'>data</span><span class='op'>$</span><span class='va'>V2</span><span class='op'>)</span> <span class='op'>+</span> <span class='fl'>20</span>  <span class='co'># Add intercept</span>

<span class='co'># Adjust</span>
<span class='va'>adjusted</span> <span class='op'>&lt;-</span> <span class='fu'>adjust</span><span class='op'>(</span><span class='va'>data</span>, effect<span class='op'>=</span><span class='st'>"V1"</span>, select<span class='op'>=</span><span class='st'>"V2"</span><span class='op'>)</span>
<span class='va'>adjusted_icpt</span> <span class='op'>&lt;-</span> <span class='fu'>adjust</span><span class='op'>(</span><span class='va'>data</span>, effect<span class='op'>=</span><span class='st'>"V1"</span>, select<span class='op'>=</span><span class='st'>"V2"</span>, keep_intercept<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># Visualize</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>V1</span>, <span class='va'>data</span><span class='op'>$</span><span class='va'>V2</span>, pch <span class='op'>=</span> <span class='fl'>19</span>, col <span class='op'>=</span> <span class='st'>"blue"</span>,
  ylim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='va'>adjusted</span><span class='op'>$</span><span class='va'>V2</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>V2</span><span class='op'>)</span><span class='op'>)</span>,
  main <span class='op'>=</span> <span class='st'>"Original (blue), adjusted (green), and adjusted - intercept kept (red) data"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/abline.html'>abline</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>V2</span> <span class='op'>~</span> <span class='va'>V1</span>, data <span class='op'>=</span> <span class='va'>data</span><span class='op'>)</span>, col <span class='op'>=</span> <span class='st'>"blue"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/points.html'>points</a></span><span class='op'>(</span><span class='va'>adjusted</span><span class='op'>$</span><span class='va'>V1</span>, <span class='va'>adjusted</span><span class='op'>$</span><span class='va'>V2</span>, pch <span class='op'>=</span> <span class='fl'>19</span>, col <span class='op'>=</span> <span class='st'>"green"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/abline.html'>abline</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>V2</span> <span class='op'>~</span> <span class='va'>V1</span>, data <span class='op'>=</span> <span class='va'>adjusted</span><span class='op'>)</span>, col <span class='op'>=</span> <span class='st'>"green"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/points.html'>points</a></span><span class='op'>(</span><span class='va'>adjusted_icpt</span><span class='op'>$</span><span class='va'>V1</span>, <span class='va'>adjusted_icpt</span><span class='op'>$</span><span class='va'>V2</span>, pch <span class='op'>=</span> <span class='fl'>19</span>, col <span class='op'>=</span> <span class='st'>"red"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/abline.html'>abline</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>V2</span> <span class='op'>~</span> <span class='va'>V1</span>, data <span class='op'>=</span> <span class='va'>adjusted_icpt</span><span class='op'>)</span>, col <span class='op'>=</span> <span class='st'>"red"</span><span class='op'>)</span>
<span class='op'>}</span>
</div><div class='output co'>#&gt; <span class='message'>Loading required package: bayestestR</span></div><div class='output co'>#&gt; <span class='message'>Note: The default CI width (currently `ci=0.89`) might change in future versions (see https://github.com/easystats/bayestestR/discussions/250). To prevent any issues, please set it explicitly when using bayestestR functions, via the 'ci' argument.</span></div><div class='output co'>#&gt; <span class='message'>Loading required package: MASS</span></div><div class='img'><img src='adjust-1.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by <a href="https://github.com/mattansb" class="external-link">Mattan S. Ben-Shachar</a>, <a href="https://dominiquemakowski.github.io/" class="external-link">Dominique Makowski</a>, <a href="https://github.com/strengejacke" class="external-link">Daniel Lüdecke</a>.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


